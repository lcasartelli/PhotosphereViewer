extends layout

block scripts

	script(src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false")
		
	script(type="text/javascript")

		function initialize() {
			// Set up Street View and initially set it visible. Register the
			// custom panorama provider function. Set the StreetView to display
			// the custom panorama 'reception' which we check for below.
			var panoOptions = {
				pano: 'reception',
				visible: true,
				panoProvider: getCustomPanorama
			};

			var panorama = new google.maps.StreetViewPanorama(
				document.getElementById('pano_canvas'), panoOptions);
		}

		// Return a pano image given the panoID.
		function getCustomPanoramaTileUrl(pano, zoom, tileX, tileY) {
			// Note: robust custom panorama methods would require tiled pano data.
			// Here we're just using a single tile, set to the tile size and equal
			// to the pano "world" size.
			console.log("#{image}");
			return "#{image}";
		}

		// Construct the appropriate StreetViewPanoramaData given
		// the passed pano IDs.
		function getCustomPanorama(pano, zoom, tileX, tileY) {
			if (pano == 'reception') {
				return {
					location: {
						pano: '#{title}',
						description: '#{title}: #{descrizione}'
					},
					links: [],
					// The text for the copyright control.
					copyright: '',
					// The definition of the tiles for this panorama.
					tiles: {
						tileSize: new google.maps.Size(1024, 512),
						worldSize: new google.maps.Size(1024, 512),
						// The heading in degrees at the origin of the panorama
						// tile set.
						centerHeading: 105,
						getTileUrl: getCustomPanoramaTileUrl
					}
				};
			}
		}

		google.maps.event.addDomListener(window, 'load', initialize);


block content
		div(id="pano_canvas", class="sphere_canvas")
